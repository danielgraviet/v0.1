<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Alpha SRE</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>

  <!-- ─── Header ──────────────────────────────────────────────────────── -->
  <header id="header">
    <div class="header-left">
      <span class="logo">ALPHA SRE</span>
      <span class="version">v0.1</span>
    </div>
    <div class="header-right">
      <span id="system-status" class="status-pill status--idle">IDLE</span>
    </div>
  </header>

  <!-- ─── Main grid ────────────────────────────────────────────────────── -->
  <main id="main">

    <!-- Panel: Incident Input -->
    <section class="panel" id="panel-input">
      <div class="panel-header">
        <span class="panel-label">INCIDENT INPUT</span>
      </div>
      <div class="panel-body">
        <textarea
          id="incident-json"
          class="json-editor"
          spellcheck="false"
          placeholder="Paste incident JSON here…"
        >{
  "deployment_id": "deploy-20260228-001",
  "logs": [
    "[ERROR] DB query timeout after 5000ms",
    "[ERROR] DB query timeout after 5000ms",
    "[ERROR] Connection pool exhausted",
    "[WARN]  Cache miss rate 94% (was 12%)"
  ],
  "metrics": {
    "p99_latency_ms": 4800,
    "p50_latency_ms": 1200,
    "db_query_time_ms": 3900,
    "cache_hit_rate": 0.06,
    "connection_pool_active": 98,
    "connection_pool_max": 100
  },
  "recent_commits": [
    {
      "sha": "a3f8c12",
      "message": "refactor: simplify user query",
      "files_changed": ["db/queries.py"]
    },
    {
      "sha": "b19e044",
      "message": "perf: remove redundant cache layer",
      "files_changed": ["services/cache.py"]
    }
  ],
  "config_snapshot": {
    "db_pool_size": 10,
    "cache_ttl_seconds": 0,
    "feature_flags": { "new_query_planner": true }
  }
}</textarea>
        <button id="analyze-btn" class="btn btn--primary" onclick="AlphaSRE.analyze()">
          RUN ALPHA →
        </button>
        <div id="input-error" class="error-msg hidden"></div>
      </div>
    </section>

    <!-- Panel: Agent Execution -->
    <section class="panel" id="panel-agents">
      <div class="panel-header">
        <span class="panel-label">AGENT EXECUTION</span>
        <span id="agents-timer" class="panel-meta hidden">0ms</span>
      </div>
      <div class="panel-body">
        <div class="agent-grid">

          <div class="agent-card" id="agent-log">
            <div class="agent-name">Log Agent</div>
            <div class="agent-status">
              <span class="badge badge--pending">PENDING</span>
            </div>
            <div class="agent-detail">—</div>
          </div>

          <div class="agent-card" id="agent-metrics">
            <div class="agent-name">Metrics Agent</div>
            <div class="agent-status">
              <span class="badge badge--pending">PENDING</span>
            </div>
            <div class="agent-detail">—</div>
          </div>

          <div class="agent-card" id="agent-commit">
            <div class="agent-name">Commit Agent</div>
            <div class="agent-status">
              <span class="badge badge--pending">PENDING</span>
            </div>
            <div class="agent-detail">—</div>
          </div>

          <div class="agent-card" id="agent-config">
            <div class="agent-name">Config Agent</div>
            <div class="agent-status">
              <span class="badge badge--pending">PENDING</span>
            </div>
            <div class="agent-detail">—</div>
          </div>

          <div class="agent-card agent-card--wide" id="agent-synthesis">
            <div class="agent-name">Synthesis Agent</div>
            <div class="agent-status">
              <span class="badge badge--pending">PENDING</span>
            </div>
            <div class="agent-detail">Waits for all agents to complete</div>
          </div>

        </div>
      </div>
    </section>

    <!-- Panel: Extracted Signals -->
    <section class="panel" id="panel-signals">
      <div class="panel-header">
        <span class="panel-label">EXTRACTED SIGNALS</span>
        <span id="signals-count" class="panel-meta">0</span>
      </div>
      <div class="panel-body">
        <div id="signals-list">
          <div class="empty-state">Run Alpha to extract signals.</div>
        </div>
      </div>
    </section>

    <!-- Panel: Ranked Hypotheses -->
    <section class="panel" id="panel-hypotheses">
      <div class="panel-header">
        <span class="panel-label">ROOT CAUSE HYPOTHESES</span>
        <span id="hypotheses-count" class="panel-meta">0</span>
      </div>
      <div class="panel-body">
        <div id="hypotheses-list">
          <div class="empty-state">Run Alpha to see ranked hypotheses.</div>
        </div>
        <div id="approval-gate" class="approval-gate hidden">
          <span class="approval-label">AI-generated diagnoses. Please review before applying.</span>
        </div>
      </div>
    </section>

  </main>

  <!-- ─── Footer ──────────────────────────────────────────────────────── -->
  <footer id="footer">
    <span>Alpha SRE — no autonomous actions. All changes require human approval.</span>
  </footer>

  <script src="/static/app.js"></script>
</body>
</html>
